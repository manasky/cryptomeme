import{S as E,i as N,s as O,e as T,c as k,a as C,d as b,b as u,V as z,f as H,G as P,Y,Z as B,D,z as V,W as X}from"./vendor-ecde7315.js";let v=t=>t>1?t.toLocaleString("en-US",{maximumFractionDigits:2}):t.toLocaleString("en-US",{maximumFractionDigits:10}),x=t=>{let e=Math.min(...t);for(var i=0;i<t.length;i++)t[i]=t[i]-e;return t},$=(t,e)=>Object.keys(t).map(i=>t[i][e]);const Z=(t,e,i,l,f,h)=>{let r=e.split(" "),o="";for(let n=0;n<r.length;n++){let g=o+r[n]+" ";t.measureText(g).width>f&&n>0?(t.fillText(o,i,l),o=r[n]+" ",l+=h):o=g}t.fillText(o,i,l)},q=({ctx:t,text:e,textX:i,textY:l})=>{t.font="10px 'Arial'",t.strokeStyle="rgba(0,0,0,.3)",t.lineWidth=3,t.strokeText(e,i,l),t.fillStyle="rgba(255,255,255,0.6)",t.fillText(e,i,l)},G=({canvas:t,ctx:e,bgImage:i,caption:l="",logo:f,footer_left:h,footer_right:r,meme_content:o})=>{e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height);let n=80,g=50,a=20,m=t.height-n+n/2-g/2,c=new Image;c.src=i,c.onload=function(){e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height);var A=t.width/c.width,I=(t.height-n)/c.height,p=Math.min(A,I);let S=c.width*p,M=c.height*p,L=(t.width-S)/2,R=t.height-n-M;e.drawImage(c,L,R,S,M);let s;l.length>400?s=18:l.length>250?s=23:l.length>150?s=24:l.length>100?s=32:l.length>40?s=40:l.length>30?s=54:l.length>10?s=70:s=90;let _=t.width-40,W=s+s*.1,j=s+20,F=(t.width-_)/2;e.font="Bold "+s+"px 'Helvetica'",e.fillStyle="black",Z(e,l,F,j,_,W);let U="CryptoMeme.WTF";o&&o.length>0&&o.forEach(d=>{if(d.image){let y=new Image;y.src=d.image,y.onload=function(){e.drawImage(y,d.x,d.y,100,100)}}else d.text&&(e.font="Bold 40px 'Arial'",e.strokeStyle="white",e.lineWidth=8,e.strokeText(d.text,d.x,d.y),e.fillStyle="black",e.fillText(d.text,d.x,d.y))}),q({ctx:e,text:U,textX:t.width-90,textY:t.height-n-10}),e.fillStyle="#000",e.fillRect(0,t.height-n,t.width,t.height);let w=new Image;w.src=f,w.onload=function(){e.drawImage(w,a,m,g,g)},e.font="Bold 20px 'Arial'",e.fillStyle="#fff",e.fillText(h.title,a+g+10,m+22),e.font="14px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle="#ccc",e.fillText(h.desc,a+g+10,m+38),e.font="20px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle="#fff",e.fillText(r.title,t.width-e.measureText(r.title).width-a,m+22),e.font="14px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle=r.color,e.fillText(r.desc,t.width-e.measureText(r.desc).width-a,m+38)}};function J(t){let e,i,l,f,h,r;return{c(){e=T("div"),i=T("canvas"),this.h()},l(o){e=k(o,"DIV",{class:!0,style:!0});var n=C(e);i=k(n,"CANVAS",{class:!0,width:!0,height:!0}),C(i).forEach(b),n.forEach(b),this.h()},h(){u(i,"class",l=""+(t[1]+" relative mb-[-12%] -mr-4")),u(i,"width","700"),u(i,"height","700"),u(e,"class",f=""+(t[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer")),z(e,"transform","translateZ(0)")},m(o,n){H(o,e,n),P(e,i),t[6](i),h||(r=Y(i,"click",function(){B(t[0]?t[4]():"")&&(t[0]?t[4]():"").apply(this,arguments)}),h=!0)},p(o,[n]){t=o,n&2&&l!==(l=""+(t[1]+" relative mb-[-12%] -mr-4"))&&u(i,"class",l),n&4&&f!==(f=""+(t[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer"))&&u(e,"class",f)},i:D,o:D,d(o){o&&b(e),t[6](null),h=!1,r()}}}function K(t,e,i){let{coin:l}=e,{clickToDownload:f=!1}=e,{classes:h="w-52"}=e,{wrapperClasses:r="-mt-3 rounded"}=e,o,n;V(()=>{let a=o.getContext("2d");G({canvas:o,ctx:a,bgImage:l.meme,caption:l.meme_caption,logo:"/logos/"+l.symbol+".png",footer_left:{title:l.name,desc:new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})},footer_right:{title:"$"+v(l.current_price),desc:(l.price_change_percentage_24h<0?"\u25BC":"\u25B2")+" "+Number(Math.abs(l.price_change_percentage_24h))+"%",color:l.price_change_percentage_24h<0?"#ea5333":"#469586"},meme_content:l.meme_content}),i(4,n=()=>{let m=document.createElement("a");m.download=l.name+"-meme-"+new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})+" [cryptomeme.wtf].jpg",m.href=o.toDataURL(),m.click()})});function g(a){X[a?"unshift":"push"](()=>{o=a,i(3,o)})}return t.$$set=a=>{"coin"in a&&i(5,l=a.coin),"clickToDownload"in a&&i(0,f=a.clickToDownload),"classes"in a&&i(1,h=a.classes),"wrapperClasses"in a&&i(2,r=a.wrapperClasses)},[f,h,r,o,n,l,g]}class ee extends E{constructor(e){super();N(this,e,K,J,O,{coin:5,clickToDownload:0,classes:1,wrapperClasses:2})}}export{ee as M,$ as e,v as f,x as n};
