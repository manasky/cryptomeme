import{S as R,i as W,s as j,e as M,c as T,a as _,d as y,b as m,f as F,G as U,Y as E,Z as N,D as k,z as O,W as z}from"./vendor-ecde7315.js";let H=l=>l>1?l.toLocaleString("en-US",{maximumFractionDigits:2}):l.toLocaleString("en-US",{maximumFractionDigits:10}),G=l=>{let e=Math.min(...l);for(var i=0;i<l.length;i++)l[i]=l[i]-e;return l},Z=(l,e)=>Object.keys(l).map(i=>l[i][e]);const P=(l,e,i,t,f,d)=>{let r=e.split(" "),o="";for(let n=0;n<r.length;n++){let g=o+r[n]+" ";l.measureText(g).width>f&&n>0?(l.fillText(o,i,t),o=r[n]+" ",t+=d):o=g}l.fillText(o,i,t)},B=({ctx:l,text:e,textX:i,textY:t})=>{l.font="10px 'Arial'",l.strokeStyle="rgba(0,0,0,.3)",l.lineWidth=3,l.strokeText(e,i,t),l.fillStyle="rgba(255,255,255,0.6)",l.fillText(e,i,t)},Y=({canvas:l,ctx:e,bgImage:i,caption:t="",logo:f,footer_left:d,footer_right:r,meme_content:o})=>{e.fillStyle="#fff",e.fillRect(0,0,l.width,l.height);let n=80,g=50,a=20,c=l.height-n+n/2-g/2,u=new Image;u.src=i,u.onload=function(){e.fillStyle="#fff",e.fillRect(0,0,l.width,l.height);let p=l.width*u.height/u.width,C=l.height-p;e.drawImage(u,0,C-n,l.width,p);let s;t.length>400?s=18:t.length>250?s=23:t.length>150?s=24:t.length>100?s=32:t.length>40?s=40:t.length>30?s=54:t.length>10?s=70:s=90;let S=l.width-40,D=s+s*.1,A=s+20,I=(l.width-S)/2;e.font="Bold "+s+"px 'Helvetica'",e.fillStyle="black",P(e,t,I,A,S,D);let L="CryptoMeme.WTF";o&&o.length>0&&o.forEach(h=>{if(h.image){let b=new Image;b.src=h.image,b.onload=function(){e.drawImage(b,h.x,h.y,100,100)}}else h.text&&(e.font="Bold 40px 'Arial'",e.strokeStyle="white",e.lineWidth=8,e.strokeText(h.text,h.x,h.y),e.fillStyle="black",e.fillText(h.text,h.x,h.y))}),B({ctx:e,text:L,textX:l.width-90,textY:l.height-n-10}),e.fillStyle="#000",e.fillRect(0,l.height-n,l.width,l.height);let w=new Image;w.src=f,w.onload=function(){e.drawImage(w,a,c,g,g)},e.font="Bold 20px 'Arial'",e.fillStyle="#fff",e.fillText(d.title,a+g+10,c+22),e.font="14px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle="#ccc",e.fillText(d.desc,a+g+10,c+38),e.font="20px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle="#fff",e.fillText(r.title,l.width-e.measureText(r.title).width-a,c+22),e.font="14px 'Andale Mono', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'Liberation Mono', 'Courier New', 'monospace'",e.fillStyle=r.color,e.fillText(r.desc,l.width-e.measureText(r.desc).width-a,c+38)}};function V(l){let e,i,t,f,d,r;return{c(){e=M("div"),i=M("canvas"),this.h()},l(o){e=T(o,"DIV",{class:!0});var n=_(e);i=T(n,"CANVAS",{class:!0,width:!0,height:!0}),_(i).forEach(y),n.forEach(y),this.h()},h(){m(i,"class",t=""+(l[1]+" relative mb-[-12%] -mr-4")),m(i,"width","700"),m(i,"height","700"),m(e,"class",f=""+(l[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer"))},m(o,n){F(o,e,n),U(e,i),l[6](i),d||(r=E(i,"click",function(){N(l[0]?l[4]():"")&&(l[0]?l[4]():"").apply(this,arguments)}),d=!0)},p(o,[n]){l=o,n&2&&t!==(t=""+(l[1]+" relative mb-[-12%] -mr-4"))&&m(i,"class",t),n&4&&f!==(f=""+(l[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer"))&&m(e,"class",f)},i:k,o:k,d(o){o&&y(e),l[6](null),d=!1,r()}}}function X(l,e,i){let{coin:t}=e,{clickToDownload:f=!1}=e,{classes:d="w-52"}=e,{wrapperClasses:r="-mt-3 rounded"}=e,o,n;O(()=>{let a=o.getContext("2d");Y({canvas:o,ctx:a,bgImage:t.meme,caption:t.meme_caption,logo:"/logos/"+t.symbol+".png",footer_left:{title:t.name,desc:new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})},footer_right:{title:"$"+H(t.current_price),desc:(t.price_change_percentage_24h<0?"\u25BC":"\u25B2")+" "+Number(Math.abs(t.price_change_percentage_24h))+"%",color:t.price_change_percentage_24h<0?"#ea5333":"#469586"},meme_content:t.meme_content}),i(4,n=()=>{let c=document.createElement("a");c.download=t.name+"-meme-"+new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})+" [cryptomeme.wtf].jpg",c.href=o.toDataURL(),c.click()})});function g(a){z[a?"unshift":"push"](()=>{o=a,i(3,o)})}return l.$$set=a=>{"coin"in a&&i(5,t=a.coin),"clickToDownload"in a&&i(0,f=a.clickToDownload),"classes"in a&&i(1,d=a.classes),"wrapperClasses"in a&&i(2,r=a.wrapperClasses)},[f,d,r,o,n,t,g]}class J extends R{constructor(e){super();W(this,e,X,V,j,{coin:5,clickToDownload:0,classes:1,wrapperClasses:2})}}export{J as M,Z as e,H as f,G as n};
