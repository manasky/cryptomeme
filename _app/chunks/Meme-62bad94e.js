import{S as j,i as L,s as U,e as p,c as _,a as k,d as b,b as c,f as E,G as O,Y as z,Z as H,D,z as P,W as R}from"./vendor-ecde7315.js";let B=t=>t>1?t.toLocaleString("en-US",{maximumFractionDigits:2}):t.toLocaleString("en-US",{maximumFractionDigits:10}),G=t=>{let e=Math.min(...t);for(var i=0;i<t.length;i++)t[i]=t[i]-e;return t},Z=(t,e)=>Object.keys(t).map(i=>t[i][e]);const F=(t,e,i,l,f,h)=>{let s=e.split(" "),n="";for(let r=0;r<s.length;r++){let g=n+s[r]+" ";t.measureText(g).width>f&&r>0?(t.fillText(n,i,l),n=s[r]+" ",l+=h):n=g}t.fillText(n,i,l)},Y=({ctx:t,text:e,textX:i,textY:l})=>{t.font="10px 'Arial'",t.strokeStyle="rgba(0,0,0,.3)",t.lineWidth=3,t.strokeText(e,i,l),t.fillStyle="rgba(255,255,255,0.6)",t.fillText(e,i,l)},N=({canvas:t,ctx:e,bgImage:i,caption:l="",logo:f,footer_left:h,footer_right:s,meme_content:n})=>{e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height);let r=80,g=50,o=20,m=t.height-r+r/2-g/2,u=new Image;u.src=i,u.onload=function(){e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height);let S=t.width*u.height/u.width,C=t.height-S;e.drawImage(u,0,C-r,t.width,S);let a;l.length>400?a=18:l.length>250?a=23:l.length>150?a=24:l.length>100?a=32:l.length>40?a=40:l.length>30?a=54:l.length>10?a=70:a=90;let T=t.width-40,I=a+a*.1,M=a+20,A=(t.width-T)/2;e.font="Bold "+a+"px 'Helvetica'",e.fillStyle="black",F(e,l,A,M,T,I);let W="CryptoMeme.WTF";n&&n.length>0&&n.forEach(d=>{if(d.image){let y=new Image;y.src=d.image,y.onload=function(){e.drawImage(y,d.x,d.y,100,100)}}else d.text&&(e.font="Bold 40px 'Arial'",e.strokeStyle="white",e.lineWidth=8,e.strokeText(d.text,d.x,d.y),e.fillStyle="black",e.fillText(d.text,d.x,d.y))}),Y({ctx:e,text:W,textX:t.width-90,textY:t.height-r-10}),e.fillStyle="#000",e.fillRect(0,t.height-r,t.width,t.height);let w=new Image;w.src=f,w.onload=function(){e.drawImage(w,o,m,g,g)},e.font="Bold 20px 'Arial'",e.fillStyle="#fff",e.fillText(h.title,o+g+10,m+22),e.font="12px 'Courier'",e.fillStyle="#ccc",e.fillText(h.desc,o+g+10,m+38),e.font="20px 'Courier'",e.fillStyle="#fff",e.fillText(s.title,t.width-e.measureText(s.title).width-o,m+22),e.font="12px 'Courier'",e.fillStyle=s.color,e.fillText(s.desc,t.width-e.measureText(s.desc).width-o,m+38)}};function V(t){let e,i,l,f,h,s;return{c(){e=p("div"),i=p("canvas"),this.h()},l(n){e=_(n,"DIV",{class:!0});var r=k(e);i=_(r,"CANVAS",{class:!0,width:!0,height:!0}),k(i).forEach(b),r.forEach(b),this.h()},h(){c(i,"class",l=""+(t[1]+" relative mb-[-12%] -mr-4")),c(i,"width","700"),c(i,"height","700"),c(e,"class",f=""+(t[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer"))},m(n,r){E(n,e,r),O(e,i),t[6](i),h||(s=z(i,"click",function(){H(t[0]?t[4]():"")&&(t[0]?t[4]():"").apply(this,arguments)}),h=!0)},p(n,[r]){t=n,r&2&&l!==(l=""+(t[1]+" relative mb-[-12%] -mr-4"))&&c(i,"class",l),r&4&&f!==(f=""+(t[2]+" overflow-hidden border border-base-content border-opacity-5 cursor-pointer"))&&c(e,"class",f)},i:D,o:D,d(n){n&&b(e),t[6](null),h=!1,s()}}}function X(t,e,i){let{coin:l}=e,{clickToDownload:f=!1}=e,{classes:h="w-52"}=e,{wrapperClasses:s="-mt-3 rounded"}=e,n,r;P(()=>{let o=n.getContext("2d");N({canvas:n,ctx:o,bgImage:l.meme,caption:l.meme_caption,logo:"/logos/"+l.symbol+".png",footer_left:{title:l.name,desc:new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})},footer_right:{title:"$"+B(l.current_price),desc:(l.price_change_24h<0?"\u25BC":"\u25B2")+" $"+Number(Math.abs(l.price_change_24h)),color:l.price_change_24h<0?"#ea5333":"#469586"},meme_content:l.meme_content}),i(4,r=()=>{let m=document.createElement("a");m.download=l.name+"-meme-"+new Date(Date.now()).toLocaleString("en-US",{year:"numeric",month:"short",day:"2-digit"})+" [cryptomeme.wtf].jpg",m.href=n.toDataURL(),m.click()})});function g(o){R[o?"unshift":"push"](()=>{n=o,i(3,n)})}return t.$$set=o=>{"coin"in o&&i(5,l=o.coin),"clickToDownload"in o&&i(0,f=o.clickToDownload),"classes"in o&&i(1,h=o.classes),"wrapperClasses"in o&&i(2,s=o.wrapperClasses)},[f,h,s,n,r,l,g]}class J extends j{constructor(e){super();L(this,e,X,V,U,{coin:5,clickToDownload:0,classes:1,wrapperClasses:2})}}export{J as M,Z as e,B as f,G as n};
